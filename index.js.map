{"version":3,"file":"index.js","sources":["../src/js/header.js","../src/js/loader.js","../src/js/modal.js","../src/img/caret-right.svg","../src/js/artists.js"],"sourcesContent":["const openMenuBtn = document.querySelector('.js-open-menu');\nconst closeMenuBtn = document.querySelector('.js-close-menu')\nconst menu = document.querySelector('.js-menu')\nconst body = document.body;\nconst mobileLinks = document.querySelectorAll('.mobile-menu__link');\n\nopenMenuBtn.addEventListener('click', () => {\n    menu.classList.add('is-open');\n    body.classList.add('no-scroll');\n});\n\ncloseMenuBtn.addEventListener('click', () => {\n    menu.classList.add('closing');       \n    body.classList.remove('no-scroll');  \n\n    setTimeout(() => {\n        menu.classList.remove('is-open', 'closing'); \n    }, 200); \n});\n\n \nmobileLinks.forEach(link => {\n  link.addEventListener('click', () => {\n    menu.classList.remove('is-open');\n    body.classList.remove('no-scroll');\n  });\n});","const loader = document.querySelector('.loader');\n\n//  лоадер показується \nexport function showLoader() {\n    loader.classList.remove('is-hidden');\n}\n\n// лоадер ховається\nexport function hideLoader() {\n    loader.classList.add('is-hidden');\n}","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api';\nconst loader = document.querySelector('.loader');\n\nconst formattedDuration = duration => {\n  const minutes = Math.floor(duration / 60000);\n  const seconds = Math.floor((duration % 60000) / 1000);\n  return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n};\n\nexport async function openArtistModal(artistId) {\n  if (!artistId) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Artist ID is missing.',\n    });\n    return;\n  }\n\n  try {\n    loader.classList.remove('is-hidden');\n    const response = await axios.get(`/artists/${artistId}`);\n    const albumsResponse = await axios.get(`/artists/${artistId}/albums`);\n    const albums = albumsResponse.data.albumsList || [];\n    const artist = response.data;\n    renderArtistModal(artist, albums);\n  } catch (error) {\n    console.error('Error fetching artist details:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load artist details.',\n    });\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n}\n\nfunction renderArtistModal(artist, albums) {\n  const existingModalWindow = document.querySelector('.artist-modal');\n  if (existingModalWindow) {\n    existingModalWindow.remove();\n  }\n\n  const modal = document.createElement('div');\n  modal.className = 'artist-modal';\n\n  modal.innerHTML = `\n        <div class=\"modal-content\">\n            <span class=\"modal-close-btn-wraper\">\n            <button type=\"button\" class=\"modal-close-btn\" aria-label=\"Close\"> <img src=\"/img/close-icon.svg\" alt=\"Close menu\" class=\"close-modal-btn\"></button> \n            </span>\n            <h2 class=\"m-a-name\">${artist.strArtist}</h2>\n            <div class=\"modal-wraper\">\n            <img src=\"${artist.strArtistThumb}\" alt=\"${artist.strArtist}\" class=\"m-a-img\" loading=\"lazy\">\n            <div class=\"desc-container\">\n            <div class=\"info-wraper\">\n                <div class=\"desc-box\">\n                    <p class=\"m-a-topic\">Years active</p>\n                    <p class=\"m-a-info\">${artist.intFormedYear} - ${artist.intDiedYear || 'Present'}</p>\n                </div>\n                <div class=\"desc-box\">\n                    <p class=\"m-a-topic\">Sex</p>\n                    <p class=\"m-a-info\">${artist.strGender}</p>\n                </div>\n                </div>\n                <div class=\"info-wraper\">\n                <div class=\"desc-box\">\n                    <p class=\"m-a-topic\">Members</p>\n                    <p class=\"m-a-info\">${artist.intMembers}</p>\n                </div>\n                <div class=\"desc-box\">\n                    <p class=\"m-a-topic\">Country</p>\n                    <p class=\"m-a-info\">${artist.strCountry}</p>\n                </div>\n                </div>\n                <div class=\"desc-box\">\n                    <p class=\"m-a-topic\">Biography</p>\n                    <p class=\"m-a-info-biography\">${artist.strBiographyEN}</p>\n                </div>\n                <div class=\"genres-container\">\n                    <p class=\"m-a-genres-container\">${artist.genres.map(genre => `<span class=\"m-a-genre\">${genre}</span>`).join('')}</p>\n                </div>\n            </div>\n            </div>\n             <p class=\"m-a-albums-topic\">Albums</p>\n            <ul class=\"m-a-albums\">\n            ${albums\n              .map(\n                album => `\n                <li class=\"m-a-album-item\">\n                <span class=\"m-a-album-name\">${album.strAlbum}</span>\n                <ul class=\"m-a-track-names\">\n                   <div class=\"info-container\"><p class=\"m-a-track-title\">Track</p><p class=\"m-a-time-title\">Time</p><p class=\"m-a-link-title\">Link</p></div>\n                ${album.tracks\n                  .map(\n                    track => `\n                 \n                        <div class=\"m-a-track-row\">\n                            <span class=\"m-a-track-name\">${track.strTrack}</span>\n                            <span class=\"m-a-track-duration\">${formattedDuration(track.intDuration)}</span>\n                            <a class=\"m-a-track-link\" href=\"${track.strTrackThumb || '#'}\"  target=\"_blank\">Y</a>\n                        </div>`\n                  )\n                  .join('')}\n                </ul>\n                </li>`\n              )\n              .join('')}\n            </ul>\n         </div>\n    `;\n\n  document.body.appendChild(modal);\n\n  const closeBtn = modal.querySelector('.modal-close-btn');\n  closeBtn.addEventListener('click', () => {\n    modal.remove();\n  });\n\n  const closeOnEsc = event => {\n    if (event.key === 'Escape') {\n      modal.remove();\n      document.removeEventListener('keydown', closeOnEsc);\n    }\n  };\n  document.addEventListener('keydown', closeOnEsc);\n}\n","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%2019L17%2012L9%205V19Z'%20fill='white'/%3e%3c/svg%3e\"","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { openArtistModal } from './modal.js';\nimport { showLoader, hideLoader } from './loader.js';\nimport caretIcon from '../img/caret-right.svg';\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api';\n\nconst artistsList = document.querySelector('.artists-list');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\nconst limit = 8;\n\nloadArtists();\nloadMoreBtn.addEventListener('click', () => {\n  currentPage += 1;\n  loadArtists();\n});\n\nartistsList.addEventListener('click', function (modalParameter) {\n  const btn = modalParameter.target.closest('.learn-more-btn');\n  if (!btn) return;\n\n  const artistId = btn.dataset.id;\n  openArtistModal(artistId);\n});\n\nasync function fetchArtists(page) {\n  const response = await axios.get('/artists', {\n    params: {\n      page: page,\n      limit: limit,\n    },\n  });\n  return response.data;\n}\n// Обрізка біографіі\nfunction formatBio(text, maxWords = 20) {\n  if (!text) return '';\n  const firstDotIndex = text.indexOf('.');\n  const words = text.split(' ');\n\n  if (firstDotIndex !== -1) {\n    const textBeforeDot = text.substring(0, firstDotIndex + 1);\n    const wordsBeforeDot = textBeforeDot.split(' ').length;\n    if (wordsBeforeDot <= maxWords) return textBeforeDot;\n  }\n\n  if (words.length > maxWords) {\n    return words.slice(0, maxWords).join(' ') + '...';\n  }\n  return text;\n}\nfunction renderArtists(artists, shouldAppend = false) {\n  const markup = artists\n    .map(\n      ({ _id, strArtist, strArtistThumb, genres, strBiographyEN }) => `\n        <li class=\"artist-item\">\n            <img class=\"artist-img\" src=\"${strArtistThumb}\" alt=\"${strArtist}\">\n            <div class=\"artist-info\">\n                <ul class=\"genres\">${genres\n                  .map(genre => `<li>${genre}</li>`)\n                  .join('')}</ul> \n                <h3 >${strArtist}</h3>\n                <p >${formatBio(strBiographyEN, 20)}</p> \n                <button type=\"button\" class=\"learn-more-btn\" data-id=\"${_id}\">Learn more<img src=\"${caretIcon}\"\n        ></button>\n            </div>\n        </li>\n    `\n    )\n    .join('');\n\n  if (shouldAppend) {\n    artistsList.insertAdjacentHTML('beforeend', markup);\n  } else {\n    artistsList.innerHTML = markup;\n  }\n}\nasync function loadArtists() {\n  try {\n    showLoader(); // Показуємо лоадер перед початком завантаження даних\n\n    loadMoreBtn.classList.add('is-hidden'); //Ховаємо поки поки йде завантаження нових\n\n    const data = await fetchArtists(currentPage);\n\n    renderArtists(data.artists, currentPage > 1);\n\n    // Ховаємо лодер колидосягли останньої сторінки\n    if (data.page >= data.totalPages) {\n      loadMoreBtn.classList.add('is-hidden');\n      if (currentPage > 1) {\n        iziToast.info({\n          position: 'topRight',\n          message: 'Ouch! That is all, folks! No more artists to show.',\n        });\n      }\n      // Показуємо лодер якщо є сторінки\n    } else {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Welcome to Ukraine! Blackout again? Or the server is resting...',\n    });\n  } finally {\n    hideLoader(); // Ховаємо лоадер списку артистів\n  }\n}\n"],"names":["openMenuBtn","closeMenuBtn","menu","body","mobileLinks","link","loader","showLoader","hideLoader","axios","formattedDuration","duration","minutes","seconds","openArtistModal","artistId","iziToast","response","albums","artist","renderArtistModal","error","existingModalWindow","modal","genre","album","track","closeOnEsc","event","caretIcon","artistsList","loadMoreBtn","currentPage","limit","loadArtists","modalParameter","btn","fetchArtists","page","formatBio","text","maxWords","firstDotIndex","words","textBeforeDot","renderArtists","artists","shouldAppend","markup","_id","strArtist","strArtistThumb","genres","strBiographyEN","data"],"mappings":"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"}